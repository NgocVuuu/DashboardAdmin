{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\OneDrive - swqpz\\\\Desktop\\\\DashboardAdmin\\\\frontend\\\\src\\\\pages\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport ChartCard from '../components/ChartCard';\nimport MapView from '../components/MapView';\nimport { useRealtimeParking } from '../hooks/useRealtimeParking';\nimport api from '../services/api';\nimport VehicleRow from '../components/VehicleRow';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const {\n    parkingLots\n  } = useRealtimeParking();\n  const [vehicleLogs, setVehicleLogs] = useState([]);\n  const [todayRevenue, setTodayRevenue] = useState(0);\n\n  // Lấy log xe vào/ra gần đây\n  useEffect(() => {\n    api.get('/vehicles').then(res => setVehicleLogs(res.data || []));\n  }, []);\n\n  // Tính số xe đang gửi (status === 'in')\n  const vehiclesIn = vehicleLogs.filter(log => log.status === 'in').length;\n\n  // Lấy tổng doanh thu hôm nay (giả sử log có trường payment.amount và payment.paidAt)\n  useEffect(() => {\n    // Nếu backend có API riêng cho doanh thu hôm nay thì nên dùng, ở đây demo tính từ logs\n    const today = new Date();\n    const todayStr = today.toISOString().slice(0, 10);\n    let total = 0;\n    vehicleLogs.forEach(log => {\n      if (log.payment && log.payment.amount && log.payment.paidAt && log.payment.paidAt.slice(0, 10) === todayStr) {\n        total += log.payment.amount;\n      }\n    });\n    setTodayRevenue(total);\n  }, [vehicleLogs]);\n\n  // Hiển thị 5 xe vào/ra gần nhất\n  const recentLogs = vehicleLogs.slice(0, 5);\n\n  // Tổng số chỗ trống còn lại\n  const totalAvailableSlots = parkingLots.reduce((sum, lot) => sum + (lot.availableSlots || 0), 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 16,\n        marginBottom: 24,\n        flexWrap: 'wrap',\n        maxWidth: 900\n      },\n      children: [/*#__PURE__*/_jsxDEV(ChartCard, {\n        title: \"S\\u1ED1 xe \\u0111ang g\\u1EEDi\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: vehiclesIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChartCard, {\n        title: \"S\\u1ED1 ch\\u1ED7 tr\\u1ED1ng c\\xF2n l\\u1EA1i\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: totalAvailableSlots\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChartCard, {\n        title: \"T\\u1ED5ng doanh thu h\\xF4m nay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [todayRevenue.toLocaleString(), \" \\u0111\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: 900,\n        marginBottom: 32\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Xe v\\xE0o/ra g\\u1EA7n \\u0111\\xE2y\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Bi\\u1EC3n s\\u1ED1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"B\\xE3i \\u0111\\u1ED7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"V\\xE0o l\\xFAc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Ra l\\xFAc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Tr\\u1EA1ng th\\xE1i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"\\u1EA2nh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: recentLogs.map(log => /*#__PURE__*/_jsxDEV(VehicleRow, {\n            log: log\n          }, log._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 32,\n        maxWidth: 900\n      },\n      children: /*#__PURE__*/_jsxDEV(MapView, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"yBtrdPTqVR3Gl/pdGCUUHEf1BRg=\", false, function () {\n  return [useRealtimeParking];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","ChartCard","MapView","useRealtimeParking","api","VehicleRow","jsxDEV","_jsxDEV","Dashboard","_s","parkingLots","vehicleLogs","setVehicleLogs","todayRevenue","setTodayRevenue","get","then","res","data","vehiclesIn","filter","log","status","length","today","Date","todayStr","toISOString","slice","total","forEach","payment","amount","paidAt","recentLogs","totalAvailableSlots","reduce","sum","lot","availableSlots","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","gap","marginBottom","flexWrap","maxWidth","title","toLocaleString","map","_id","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/ADMIN/OneDrive - swqpz/Desktop/DashboardAdmin/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport ChartCard from '../components/ChartCard';\r\nimport MapView from '../components/MapView';\r\nimport { useRealtimeParking } from '../hooks/useRealtimeParking';\r\nimport api from '../services/api';\r\nimport VehicleRow from '../components/VehicleRow';\r\n\r\nconst Dashboard = () => {\r\n  const { parkingLots } = useRealtimeParking();\r\n  const [vehicleLogs, setVehicleLogs] = useState([]);\r\n  const [todayRevenue, setTodayRevenue] = useState(0);\r\n\r\n  // Lấy log xe vào/ra gần đây\r\n  useEffect(() => {\r\n    api.get('/vehicles').then(res => setVehicleLogs(res.data || []));\r\n  }, []);\r\n\r\n  // Tính số xe đang gửi (status === 'in')\r\n  const vehiclesIn = vehicleLogs.filter(log => log.status === 'in').length;\r\n\r\n  // Lấy tổng doanh thu hôm nay (giả sử log có trường payment.amount và payment.paidAt)\r\n  useEffect(() => {\r\n    // Nếu backend có API riêng cho doanh thu hôm nay thì nên dùng, ở đây demo tính từ logs\r\n    const today = new Date();\r\n    const todayStr = today.toISOString().slice(0, 10);\r\n    let total = 0;\r\n    vehicleLogs.forEach(log => {\r\n      if (\r\n        log.payment &&\r\n        log.payment.amount &&\r\n        log.payment.paidAt &&\r\n        log.payment.paidAt.slice(0, 10) === todayStr\r\n      ) {\r\n        total += log.payment.amount;\r\n      }\r\n    });\r\n    setTodayRevenue(total);\r\n  }, [vehicleLogs]);\r\n\r\n  // Hiển thị 5 xe vào/ra gần nhất\r\n  const recentLogs = vehicleLogs.slice(0, 5);\r\n\r\n  // Tổng số chỗ trống còn lại\r\n  const totalAvailableSlots = parkingLots.reduce((sum, lot) => sum + (lot.availableSlots || 0), 0);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Dashboard</h2>\r\n      {/* Thống kê nhanh */}\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          gap: 16,\r\n          marginBottom: 24,\r\n          flexWrap: 'wrap',\r\n          maxWidth: 900\r\n        }}\r\n      >\r\n        <ChartCard title=\"Số xe đang gửi\">\r\n          <div>{vehiclesIn}</div>\r\n        </ChartCard>\r\n        <ChartCard title=\"Số chỗ trống còn lại\">\r\n          <div>{totalAvailableSlots}</div>\r\n        </ChartCard>\r\n        <ChartCard title=\"Tổng doanh thu hôm nay\">\r\n          <div>{todayRevenue.toLocaleString()} đ</div>\r\n        </ChartCard>\r\n      </div>\r\n      {/* Bảng xe vào/ra gần đây */}\r\n      <div style={{ maxWidth: 900, marginBottom: 32 }}>\r\n        <h3>Xe vào/ra gần đây</h3>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Biển số</th>\r\n              <th>Bãi đỗ</th>\r\n              <th>Vào lúc</th>\r\n              <th>Ra lúc</th>\r\n              <th>Trạng thái</th>\r\n              <th>Ảnh</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {recentLogs.map(log => (\r\n              <VehicleRow key={log._id} log={log} />\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {/* Bản đồ */}\r\n      <div style={{ marginTop: 32, maxWidth: 900 }}>\r\n        <MapView />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}